通用寄存器：

![image-20210920233529655](80386.assets/image-20210920233529655.png)

指令指针寄存器IP和标志寄存器FLAGS的扩展：

![image-20210920233931526](80386.assets/image-20210920233931526.png)





DS:SI		ES:DI		CS:IP		SS:SP

段寄存器的扩充：

在实模式下，可以访问到的地址范围是0 0000 ~ 10 FFEF

![image-20210920234402519](80386.assets/image-20210920234402519.png)

在保护模式下：

程序所使用的段得提前分配，并登记在一个表中（描述符表）

描述符表中登记了每个段的起始地址和段的长度等信息

段的起始地址可以是任意的32位内存地址，段的长度范围是0~4G	

段寄存器不再用于存储段的逻辑段地址，而是存储描述符的选择子，用来从描述符表中选择一个描述符

一旦选择了一个描述符，处理器取出描述符中的段基地址，再加上程序中给出的段内偏移地址，形成完整的内存地址	这里的段内偏移地址也是没有限制的，可以是0~4G



DS:BX		SS:SP

![image-20210921000358708](80386.assets/image-20210921000358708.png)



![image-20210921091640431](80386.assets/image-20210921091640431.png)



描述符表GDT、全局描述符表寄存器GDTR

![image-20210921112054431](80386.assets/image-20210921112054431.png)

因为全局描述符表边界是16位的，所以GDT最大64KB

因为一个描述符是8个字节，所以最多可以在这个表中定义8K（8*1024=8192）个描述符



![image-20210921121246879](80386.assets/image-20210921121246879.png)

一个描述符是8个字节的，即64bit

![image-20210921144213530](80386.assets/image-20210921144213530.png)



x表示可执行还是不可执行，1表示它是可执行的代码段，0表示它是不可执行的数据段

E表示该段的扩展方向是向上还是向上，0表示扩展方向是向上，1表示扩展的方向是向下（通常是栈段）

![image-20210921151112889](80386.assets/image-20210921151112889.png)

x表示可执行还是不可执行，1表示它是可执行的代码段，0表示它是不可执行的数据段

c位是1表示该段是非依从的代码段，只有特权级相同的程序才能直接转移到这个段执行，

c位是0表示该段是依从的代码段，特权级低的程序直接可以直接转移到这个段执行

R位表示该段是否允许读出

![image-20210921145910460](80386.assets/image-20210921145910460.png)



![image-20210921150045185](80386.assets/image-20210921150045185.png)



A表示该段最近是否被访问过，0表示否，当内存紧张时，可以把A位是0的段退避到磁盘上，从而实现虚拟内存管理

![image-20210921151403750](80386.assets/image-20210921151403750.png)

20bit的段界限用来限制段的扩展范围，从侧面体现了段的大小

![image-20210921152023885](80386.assets/image-20210921152023885.png)

此时段界限表示向上可以达到的最大值

![image-20210921153011962](80386.assets/image-20210921153011962.png)

此时段界限表示向下可以达到的最小值（从FFFF或者FFFF FFFF开始向下扩展）

![image-20210921153051618](80386.assets/image-20210921153051618.png)

G位是0表示界限值是以1字节为单位的为；1表示界限值是以4k字节为单位

![image-20210921153309686](80386.assets/image-20210921153309686.png)

![image-20210921153814328](80386.assets/image-20210921153814328.png)

当内存空间紧张时，有可能只是建立了段描述符，但是对应的段并没有被安排，被认为是不存在的，此时置P为0

![image-20210921154027951](80386.assets/image-20210921154027951.png)



我们目前讲的是32位系统，将该位置0即可

![image-20210921154844121](80386.assets/image-20210921154844121.png)

D/B位，0表示按照16位进行操作，1表示按照32位进行操作。 例如：对于向下扩展的栈段来说，它指示了是按照sp进行操作还是esp进行操作，段界限的最大值是FFFF还是FFFF FFFF

![image-20210921154556926](80386.assets/image-20210921154556926.png)



![image-20210921155202098](80386.assets/image-20210921155202098.png)





























